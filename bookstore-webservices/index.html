<!doctype html><html lang=en-us><head><meta charset=utf-8><title>BookStore WebServices</title><meta name=description content="Thoughts and pieces of code, sometimes none of them."><meta property="og:url" content="https://wandercosta.com/bookstore-webservices/"><meta property="og:type" content="article"><meta property="og:title" content="BookStore WebServices | WanderCosta"><meta property="og:description" content="RESTful WebServices with Java and Jersey."><meta property="og:image" content="https://wandercosta.com/img/wander-thumb.png"><meta name=twitter:title content="BookStore WebServices | WanderCosta"><meta name=twitter:description content="RESTful WebServices with Java and Jersey."><meta name=twitter:card content="summary"><meta name=twitter:site content="@rwanderc"><meta name=twitter:creator content="@rwanderc"><script async src="https://www.googletagmanager.com/gtag/js?id=G-00ERBL6RH1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-00ERBL6RH1")</script><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://wandercosta.com/index.xml title=WanderCosta><link rel=stylesheet href=https://wandercosta.com/fontawesome/css/all.min.css><link id=dark-mode-theme rel=stylesheet href=https://wandercosta.com/css/dark.css><script>var darkTheme=document.getElementById("dark-mode-theme"),storedTheme=localStorage.getItem("dark-mode-storage");storedTheme==="dark"?darkTheme.disabled=!1:storedTheme==="light"&&(darkTheme.disabled=!0)</script><script src=https://wandercosta.com/js/main.bundle.js></script>
<script src=https://wandercosta.com/js/instantpage.min.js type=module defer></script><meta name=generator content="Hugo 0.101.0"></head><body><header><nav class=navbar><div class=nav><a href=https://wandercosta.com/ class=nav-logo><img src=https://wandercosta.com//img/logo-64.jpg width=50 height=50 alt=Logo></a><ul class=nav-links><li><a href=/about/ id=About><em class="fas fa-user fa-lg"></em></a></li><li><a href=/tags id=Tags><em class="fas fa-tag fa-lg"></em></a></li></ul></div></nav><div class=intro-header><div class=container><div class=posts-heading><h1>BookStore WebServices</h1><h2>restful webservices with java and jersey</h2></div></div></div></header><div class=container role=main><article class=article class=blog-post><img src=/img/post-bg-bookstore.jpg title><p>In this post I will explain step-by-step how to create a simple <strong>BookStore</strong> with RESTful WebServices.</p><p>This <a href=https://github.com/rwanderc/examples/tree/master/jersey/jersey-book-store>code</a> is also available in my <a href=https://github.com/rwanderc>GitHub</a> page. Feel free to comment if you have any doubt or suggestion. üòÑ</p><p>For this application, I will use the following software:</p><ul><li>Java JDK 8u73;</li><li>NetBeans IDE 8.1 (Build 201510222201);</li><li>Maven 3.3.9.</li></ul><p>Maven will download all necessary packages used in the application. The most important are:</p><ul><li>Jersey 2.25.1 for the RESTful implementation;</li><li>Lombok 1.16.16 for productivity;</li><li>JUnit 4.12 for tests;</li><li>Mockito 1.10.19 to tests;</li><li>Apache Commons 2.6 for utility classes;</li><li>Jetty Maven Plugin 9.4.4 to run easily in Jetty;</li><li>JaCoCo 0.7.9 to code coverage report.</li></ul><h3 id=licensing>Licensing</h3><p>This software is licensed under the MIT license, what basically means that you can use it for any purpose <em><strong>without any warranty</strong></em>. ‚ö†Ô∏è</p><h1 id=architecture>Architecture</h1><p>This application will be able to provide the features of querying, adding, updating and deleting books. All transactions will be available in JSON format.</p><p>To decrease complexity of the example, instead of implementing real persistence with database, we will implement a very simple in-memory database, that does not offer good scalability and is not recommended for real use. For real applications, consider using a real database like MySQL, Postgre, MongoDB, etc.</p><p>Our application is very simple and will have these important structures:</p><ul><li><strong>Book</strong>: is the entity class, representing a single book;</li><li><strong>BookDB</strong>: is the class responsible for handling the in-memory database;</li><li><strong>BookResource</strong>: is the class responsible for providing the RESTful web service;</li><li><strong>pom.xml</strong>: the XML file to configure Maven to use the right dependencies;</li><li><strong>web.xml</strong>: is the XML to configure the service.</li></ul><p>Note that this application intentionally has no concern with design patterns, however it follows some MVC conventions.</p><h1 id=code>Code</h1><p>If you are willing to straightly get code, go to <a href=https://github.com/rwanderc/examples/tree/master/jersey/jersey-book-store>code</a>. However if your intention is to understand the step-by-step creation, this post will try to help you.</p><h2 id=creating-the-project>Creating the project</h2><p>You will create a new maven web project, name it <strong>BookStore</strong> and associate it to <strong>NO WEB SERVER</strong>, as we will use Jetty plugin to run the application.</p><p><img src=/img/bookstore/img1.jpg alt=img/bookstore/img1.jpg></p><p><img src=/img/bookstore/img2.jpg alt=img/bookstore/img2.jpg></p><p><img src=/img/bookstore/img3.jpg alt=img/bookstore/img3.jpg></p><h2 id=configuring-pomxml>Configuring POM.XML</h2><p>Go to the <strong>Project Files</strong> and double-click at <strong>pom.xml</strong> file. It&rsquo;s an XML file with all the information that Maven will need to download packages and build the application.</p><h3 id=configuring-the-dependencies>Configuring the dependencies</h3><p>Now, you need to configure Maven to download and import all the necessary libraries. To do so, you will need to add the following dependencies into the tag <strong>dependencies</strong> in the <strong>pom.xml</strong> file.</p><script type=application/javascript src=https://gist.github.com/rwanderc/e33a5128e8a88eb020cc661e8baa8a5b.js></script><p>Note that only the dependency <strong>jersey-container-servlet-core</strong> is necessary to provide RESTful web services.
However the dependency <strong>jersey-media-json-jackson</strong> is being used to provide capacity to connect to Jackson&rsquo;s JSON parser. Please, refer to Jersey documentation if you can use other JSON parser implementation instead of this one, of if you want to provide a XML parser as well.</p><p>We need to add Lombok (which I recommend to always use in all projects), to provide less code and more functionality.</p><script type=application/javascript src=https://gist.github.com/rwanderc/0b256d4480e6c12ec3a9a188a729aa60.js></script><p>And finally, we should add the dependencies that will be used in the tests.</p><script type=application/javascript src=https://gist.github.com/rwanderc/dda4544b29b589b20799a8126cddb3fc.js></script><p>After all dependencies added, our dependencies tag will be like this.</p><script type=application/javascript src=https://gist.github.com/rwanderc/24d63c00bafe04b11ef6d5b02b3cc539.js></script><h3 id=configuring-the-build>Configuring the build</h3><p>As previously informed, we avoided Netbeans to configure a Server for the project. The reason is that we will not only configure Maven to manage the build, but we will also configure it to manage the deployment. To do so, we will add a build plug-in into the tag <strong>build</strong> &#187; <strong>plugins</strong> in the <strong>pom.xml</strong>. Once done, Maven will use this plug-in to run the project, and Netbeans will not be responsible for this task any more. The configuration block is preventing Jetty from keep scanning resources for some time, but it&rsquo;s not mandatory.</p><script type=application/javascript src=https://gist.github.com/rwanderc/c630e0c3da556b5b91738d5a38f27a04.js></script><h2 id=configuring-webxml>Configuring WEB.XML</h2><p>If the file <strong>web.xml</strong> does not exist in the <strong>WEB-INF</strong> folder, you can create it. If it&rsquo;s already created, go to the configuration instructions.</p><p>Add a new file into the project, and select a Standard Deployment Descriptor.</p><p><img src=/img/bookstore/img4.jpg alt=img/bookstore/img4.jpg></p><p><img src=/img/bookstore/img5.jpg alt=img/bookstore/img5.jpg></p><p>After adding the file (or if it already exists), it&rsquo;s time to configure it, by inserting the servlet configuration to be used to provide the services and the base URL for the services. In the end, the file must have the following data:</p><script type=application/javascript src=https://gist.github.com/rwanderc/67dd86e389cb147bc09a85d92b799e14.js></script><p>Note that <strong>servlet &#187; init-param &#187; param-value</strong> will contain the base package were the Jersey will search for services to get loaded. So, all services exposed must be under this package (or the child packages), or you must provide many package paths separated by semicolon.</p><p>The <strong>servlet-mapping &#187; url-pattern</strong> describes the base URL for the services to be accessed. Thus, if the application and services will be accessible from the URL <strong>http://localhost:8080/BookStore/</strong>.</p><p>In general, if your application will only provide RESTful resources, you can map the <strong>url-pattern</strong> to be <code>*/**</code>, but if you also need to provide static files (e.g.: HTML or JSP files), you will need to map the RESTful resources to a path like <code>/ws/**</code> and provide a folder inside the context for the files.</p><script type=application/javascript src=https://gist.github.com/rwanderc/f41316721b08c0fe9616dd2ab6e5b83b.js></script><h2 id=the-entity>The entity</h2><p>Now, we will create the class <strong>Book</strong>.</p><p>Note that the annotation <strong>@Data</strong> comes from Lombok and will generate getters and setters automatically in compilation time.</p><script type=application/javascript src=https://gist.github.com/rwanderc/018726626b7074320fc387adba50f3ff.js></script><p>In this simple entity, we only have 4 attributes to describe the book. You can add more if you want to.</p><h2 id=in-memory-database>In-memory Database</h2><p>The following class will provide CRUD functionalities to an in-memory database of books, to simplify the project.</p><script type=application/javascript src=https://gist.github.com/rwanderc/a8b4418bc6886bbe8f448b5107fcca5b.js></script><h2 id=adding-the-service>Adding the service</h2><p>The service will mostly reflect the CRUD operations from the database to the Book entity, exposing 5 services: find all, find, save, update, delete.</p><p>Note that the service consumes and produces JSON data, configured in the class annotations.
It also returns an object of the class <strong>javax.ws.rs.core.Response</strong> in all methods. This class is the default class used by Jersey to provide full control of the responses for the services, so you can configure the HTTP status code and the entity of the response.</p><script type=application/javascript src=https://gist.github.com/rwanderc/d28424b0e9cc60e660461edfec936261.js></script><p>However, you can also return a personalized entity, decreasing the amount of necessary code within the method. In this case, you will not be able to control the HTTP status code of the response.</p><h1 id=running>Running</h1><p>Now you can compile and deploy the project. Jetty must be able to initialize everything and the services will start.
You can run from the Jetty plugin with the following command: <code>mvn jetty:run</code>.</p><p>To interact with the service, you can use <a href=http://www.getpostman.com/>Postman</a>, which is a very useful Chrome plug-in to access RESTful services, or you can run the following cURL commands directly from bash:</p><h4 id=get-all>Get all</h4><script type=application/javascript src=https://gist.github.com/rwanderc/e3975a329153cc9a9cac0cd9605f61cd.js></script><h4 id=get-specific>Get specific</h4><script type=application/javascript src=https://gist.github.com/rwanderc/d44a993bb9ded5e9d3ea3fb1ae0b3208.js></script><h4 id=add>Add</h4><script type=application/javascript src=https://gist.github.com/rwanderc/b969bcd1fa5d5da235a878dca25ce9cf.js></script><h4 id=update>Update</h4><script type=application/javascript src=https://gist.github.com/rwanderc/928b38bfc3e6d559ee115f00947dbd24.js></script><h4 id=delete>Delete</h4><script type=application/javascript src=https://gist.github.com/rwanderc/6683c2c14b409c4085d7a94bbe24564b.js></script><div class=blog-tags>Tags:
<a href=https://wandercosta.com/tags/java/>java</a>&nbsp;
<a href=https://wandercosta.com/tags/jersey/>jersey</a>&nbsp;</div></article><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="wandercosta",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><footer><div class=social-icons><a href=/index.xml name=feed><em class="fa fa-rss-square"></em></a>
&nbsp;&ndash;&nbsp;
<a href=mailto:contact@wandercosta.com name=email><em class="fas fa-envelope"></em></a>
&nbsp;&ndash;&nbsp;
<a href=https://twitter.com/rwanderc name=twitter><em class="fab fa-twitter"></em></a>
&nbsp;&ndash;&nbsp;
<a href=https://github.com/rwanderc name=github><em class="fab fa-github"></em></a>
&nbsp;&ndash;&nbsp;
<a href=https://www.linkedin.com/in/rwanderc/ name=linkedin><em class="fab fa-linkedin"></em></a></div><div class=container><p class="credits copyright"><a href=https://wandercosta.com/about>Wander Costa</a>
&nbsp;&copy;
2022
&nbsp;/&nbsp;
<a href=https://wandercosta.com/>WanderCosta</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>